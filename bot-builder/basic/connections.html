<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Connections · Haptik Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="This section will cover the following topics:  "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Connections · Haptik Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.haptik.ai/"/><meta property="og:description" content="This section will cover the following topics:  "/><meta property="og:image" content="https://docs.haptik.ai/img/image_0.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.haptik.ai/img/image_0.png"/><link rel="shortcut icon" href="/img/image_0.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-106563119-6', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="/js/index.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/image_0.png" alt="Haptik Docs"/><h2 class="headerTitleWithLogo">Haptik Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/#tools" target="_self">Tools</a></li><li class=""><a href="/#integrations" target="_self">Integrations</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Resources</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/for-bot-builders">For Bot Builders</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/making-first-bot">Making Your First Bot</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/design-guidelines">Designing Chat Experiences</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/testing-bot">Testing your bot</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/multiple-languages">Multiple Languages</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/building-voice-bots">Building Voice bots</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/platforms-deployment">Platforms Deployment</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/managing-bot-state">Managing Bot Context and State</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Resources</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/bot-hierarchy">Bot Hierarchy</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/business">Business</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/creating-story">Creating a Story</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/smalltalk">Small Talk</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/dialoguemanager">Dialogue Manager</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/story-templates">Story Templates</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/creating-nodes">Creating Nodes</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/bot-builder/basic/connections">Connections</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/general-nodes">General Nodes</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/user-says-guidelines">User Says Guidelines</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/bot-says">Bot Says</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/chat-elements">Chat Elements</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/intent">Intent</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/disambiguation">Did you mean? (Disambiguation)</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/entities">Entities</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/oracle-feedback">ORACLE Feedback</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/bot-prompt-trigger">Bot Prompt Trigger</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/forms">Forms</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/upload-graph-nodes">Upload Graph Nodes</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Integrations</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/integrations/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/integrations/integration-parameters">Integration Parameters</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/integrations/integrating-apis">Integrating APIs</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/integrations/integrating-custom-code">Integrating Custom Code</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/integrations/additional-apis">Additional APIs</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/integrating-webviews-into-sdk">Integrating Webviews</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/integrating-with-external-bot">Integrating with External Bot</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/development-guidelines">Bot Development Life Cycle</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/testing-guidelines">Testing Guidelines</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/debugging-guidelines">How to debug your bot?</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Connections</h1></header><article><div><span><p>This section will cover the following topics:<br>
<a href="#what-are-connections">What are connections?</a>  <br>
<a href="#static-node-to-static-node-connection-transition">Static Node to Static Node Connection Transition</a>  <br>
<a href="#static-node-to-code-node-connection-transition">Static Node to Code Node Connection Transition</a>  <br>
<a href="#code-node-to-output-node-connection-transition">Code Node to Output Node Connection Transition</a>  <br>
<a href="#output-node-to-static-node-connection-transition">Output Node to Static Node Connection Transition</a>
<a href="#dependent-response">Dependent Response</a>   <br>
<a href="#connection-guidelines">Connection Guidelines</a></p>
<h3><a class="anchor" aria-hidden="true" id="what-are-connections"></a><a href="#what-are-connections" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What are Connections?</h3>
<p>Connections represent the path a conversation takes from node to node. Depending on the response a user inputs to the bot, they traverse down a different connection to the appropriate next node. Bot builders must modify every connection they create to indicate which user inputs correspond to which nodes.</p>
<h3><a class="anchor" aria-hidden="true" id="creating-connections"></a><a href="#creating-connections" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating Connections?</h3>
<p>You can create a connection between two nodes by clicking on the parent node, holding shift and dragging to the child node as shown below:</p>
<p><img src="/assets/bot-builder-connections/creating-connections.gif" alt="Creating Connections"></p>
<h3><a class="anchor" aria-hidden="true" id="static-node-to-static-node-connection-transition"></a><a href="#static-node-to-static-node-connection-transition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Static Node to Static Node Connection Transition</h3>
<p>You might want to transition from one static node to another based on the user's input to branch into a different information collection flow.</p>
<p><img src="/assets/bot-builder-connections/static-to-static.png" alt="Static-to-Static Connection"></p>
<p>The connections you create can prompt a user to transition from one node to the next in the following three ways:</p>
<p><strong>1. Transition Basis message input by user:</strong></p>
<p>This is when a conversation moves from one node to another based on a particular keyword/phrase or set of keywords sent by a user.</p>
<ul>
<li><p>To set a connection based on a user input, click on the arrow linking the two nodes you need to link</p></li>
<li><p>Click on 'Connection Responses,' which will take you to the following screen.</p></li>
</ul>
<p><img src="/assets/bot-builder-user-says/connection_user_message.png" alt="Basis user message"></p>
<ul>
<li><p>Decide which type of user input you want to set as an indicator to transition to the next node.</p>
<ul>
<li><p>Independent Responses: Adding potential user inputs here indicates to the bot that a user may transition to this next node from any point in the conversation as long as their input sufficiently matches the responses input by the bot builder.</p></li>
<li><p>Negative Responses: Adding user inputs for which, you do not want the connection to happen.</p></li>
<li><p>Responses from 'Previous_Node': This lets you limit the flow of conversation so that a user can only reach the next node if the bot has received a response from the specific preceding node.</p></li>
</ul></li>
</ul>
<p><strong>2. Transition Basis a particular entity value</strong></p>
<p>(a.k.a. a Step Transition): The last type of transition that you can create is where a user may only move to the next node if a user inputs a specific value(s) from within an entity on a node.</p>
<ul>
<li><p>To set a step transition value, click the arrow between the two nodes for which you're creating a connection</p></li>
<li><p>Select Step Transition Values, which will take you to the screen below</p></li>
</ul>
<p><img src="/assets/bot-builder-user-says/connection_entity_value.png" alt="Basis entity value"></p>
<ul>
<li>Here, you add the entity value and press the enter key on your keyboard. You can add multiple values for this entity.</li>
</ul>
<p><strong>3. Transition Basis a particular entity presence</strong></p>
<p>When you’ve added an entity to a conversation, you can define the transition from the node with the entity to the next as only being possible if the user has input a response that falls within the entity. This is particularly helpful when you are setting a conversational flow in which a user needs to input something like a phone number or email ID. All values within the entities are accepted, but the bot will be able to determine whether or not the user has input the correct type of value (i.e. a 9 digit number or a complete email address).</p>
<ul>
<li>To set a connection based on an entity presence, click on the arrow connecting the two nodes you're looking to connect. This will take you to the following screen:</li>
</ul>
<p><img src="/assets/bot-builder-user-says/connection_entity_presence.png" alt="Basis entity presence"></p>
<ul>
<li>The entities from the first node should automatically appear in a drop down menu. Select from the list to complete the creation of a transition based on entity presence.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="static-node-to-code-node-connection-transition"></a><a href="#static-node-to-code-node-connection-transition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Static Node to Code Node Connection Transition</h3>
<p>Transition from a static node to code node happens automatically once all the required entities are collected.</p>
<p>However, if the static node is connected to another static node and has a user says or entity based transition and the condition for these transitions get satisfied then the transition will happen to the connnected static node and not the connected node.</p>
<p><img src="/assets/bot-builder-connections/static-to-code.png" alt="Static-to-Code Connection"></p>
<h3><a class="anchor" aria-hidden="true" id="code-node-to-output-node-connection-transition"></a><a href="#code-node-to-output-node-connection-transition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Code Node to Output Node Connection Transition</h3>
<p>You can transition from a code node to any output node basis a set of rules/conditions applied on the output JSON from the code node.</p>
<p><img src="/assets/bot-builder-connections/code-to-output.png" alt="Code-to-Output Connection"></p>
<p><strong>1. Transition Basis Rules on Output JSON:</strong></p>
<p>You can apply a combination of rules combined by either <code>AND</code> or <code>OR</code> to traverse from one node to the other.</p>
<p>You can add rules in the following way:</p>
<ul>
<li>Click on the connection between a code node and an output node to open the RHS window.</li>
<li>Select the condition combination type as <code>AND</code> or <code>OR</code>.</li>
<li>Next select the variable from the JSON on which you want to add condition. For example, choose the <code>Salary</code> field from the JSON output.</li>
<li>Next select the conditional operator that you want to apply from the dropdown. For example, choose the operator as <code>Greater Than</code>.</li>
<li>Finally enter the value to complete the rule. For example we can enter the value as <code>25000</code>. Now the rule becomes <code>Salary Greater Than 25000</code> and the node will be traversed whenever this condition is true.</li>
<li>You can add another rule using the <code>+ Add Condition</code> button from the top menu of the RHS window.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="output-node-to-static-node-connection-transition"></a><a href="#output-node-to-static-node-connection-transition" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output Node to Static Node Connection Transition</h3>
<p>You can transition from an output node to a static node based on the user input by using user says based transition or by an entity transition.</p>
<p><strong>1. Transition Basis message input by user:</strong></p>
<p>This is when a conversation moves from one node to another based on a particular keyword/phrase or set of keywords sent by a user.</p>
<ul>
<li>Create a connection fromt the parent node to the child node.</li>
<li>Click on the connection linking the two nodes.</li>
<li>Add the 'User Says' in the RHS screen shown below.</li>
</ul>
<p><img src="/assets/bot-builder-user-says/connection_user_message.png" alt="Output-to-Static Connection"></p>
<p><strong>2. Transition Basis a particular entity value</strong></p>
<p>(a.k.a. a Step Transition): The last type of transition that you can create is where a user may only move to the next node if a user inputs a specific value(s) from within an entity on a node.</p>
<ul>
<li><p>To set a step transition value, click the arrow between the two nodes for which you're creating a connection</p></li>
<li><p>Select Step Transition Values, which will take you to the screen below</p></li>
</ul>
<p><img src="/assets/bot-builder-user-says/connection_entity_value.png" alt="Basis entity value"></p>
<ul>
<li>Here, you add the entity value and press the enter key on your keyboard. You can add multiple values for this entity.</li>
</ul>
<p><strong>3. Transition Basis a particular entity presence</strong></p>
<p>When you’ve added an entity to a conversation, you can define the transition from the node with the entity to the next as only being possible if the user has input a response that falls within the entity. This is particularly helpful when you are setting a conversational flow in which a user needs to input something like a phone number or email ID. All values within the entities are accepted, but the bot will be able to determine whether or not the user has input the correct type of value (i.e. a 9 digit number or a complete email address).</p>
<ul>
<li>To set a connection based on an entity presence, click on the arrow connecting the two nodes you're looking to connect. This will take you to the following screen:</li>
</ul>
<p><img src="/assets/bot-builder-user-says/connection_entity_presence.png" alt="Basis entity presence"></p>
<ul>
<li>The entities from the first node should automatically appear in a drop down menu. Select from the list to complete the creation of a transition based on entity presence.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="connection-guidelines"></a><a href="#connection-guidelines" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connection Guidelines</h3>
<h4><a class="anchor" aria-hidden="true" id="when-should-you-add-a-connection"></a><a href="#when-should-you-add-a-connection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><em>When should you add a connection?</em></h4>
<ol>
<li><p>If chat flow contains a conditional logic and you need to take action based on the user response or entity value</p>
<p>For example: When you would like the user to select the preferred language before continuing with the chat flow.</p>
<p><img src="/assets/bot-builder-user-says/add_connection_flow.png" alt="Conditional Chat Flow"></p></li>
<li><p>If the chat contains a linear flow, but as we have a conditional logic for validation, split the logic into two nodes and transition to child node is done using dependent response or entity based transition.</p>
<p>For example: When you want to validate a user’s phone number to ensure that it is a valid user before continuing with the char flow. <strong><em>_Enter Details _</em></strong> contains an integration function that validates user’s phone number and transition to the child node is done based on the response.</p>
<p><img src="/assets/bot-builder-user-says/add_connection_linear.png" alt="Linear Chat Flow"></p></li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="when-should-you-have-an-incoming-connections-to-a-start-node"></a><a href="#when-should-you-have-an-incoming-connections-to-a-start-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><em>When should you have an incoming connections to a start node?</em></h4>
<p>When user message on connection and on the independent response on the start node is different</p>
<p>For example: When you would like to transition to the child based on single words such as voice or data.</p>
<pre><code class="hljs">User says: I want to recharge

Bot says: What would you like to recharge? Data plan or Voice plan?

User says: voice

Bot says: Sure! Let me go ahead and fetch the voice recharge plans
</code></pre>
<p>Adding single words like voice, data, recharge, plan or phrase like data plan, what is the process, how to get without any context around the word or phrase is a bad practise. It will cause conflicts and lead to a false response.</p>
<h4><a class="anchor" aria-hidden="true" id="when-should-you-have-an-incoming-connections-to-a-non-start-node"></a><a href="#when-should-you-have-an-incoming-connections-to-a-non-start-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><em>When should you have an incoming connections to a non-start node?</em></h4>
<p>Parent node connected to two child nodes and entity value based transition</p>
<p>When user wants to apply for a loan. <strong><em>‘Lead Generation node’</em></strong> should be able to understand the users goal and guide user through loan application process  and collect the <em>phone_number</em> , <em>email</em>, <em>confirmation</em> entities. Check with the user if representative can call the user right away and save the users response in ‘<em>confirmation</em>’ entity. Use entity value based transition to traverse to the child node.</p>
<ul>
<li><strong><em>User says</em></strong> - User says section should contain different patterns of user utterances. Consider ‘Lead Generation’ node -</li>
</ul>
<p><img src="/assets/bot-builder-user-says/lead_gen_usersays.png" alt="Lead Gen User Says"></p>
<ul>
<li><strong><em>Bot says</em></strong> - Add a message to confirm that the bot understood user’s goal and ask user to provide the phone number.</li>
</ul>
<p><img src="/assets/bot-builder-user-says/lead_gen_botsays.png" alt="Lead Gen Bot Says"></p>
<ul>
<li><strong><em>Entity</em></strong> - Create mandatory entities <em>phone_number</em>, <em>email</em> and <em>confirmation</em> entities. Add the default message for all these entities.</li>
</ul>
<p><img src="/assets/bot-builder-user-says/lead_gen_entity.png" alt="Lead Gen Entity"></p>
<ul>
<li><strong><em>Final Response</em></strong> - Once the user selects one of the quick responses ‘Yes’ or ‘No’. Use that to traverse to the child node. User chat -</li>
</ul>
<p><img src="/assets/bot-builder-user-says/lead_gen_finalresponse.png" alt="Lead Gen Final Response"></p>
<p>Make the <em>confirmation</em> entity non-mandatory and use the final response to get a confirmation from the user to transition to the child node.</p>
<p><img src="/assets/bot-builder-user-says/lead_gen_callback.png" alt="Lead Gen User Chat"></p>
<h3><a class="anchor" aria-hidden="true" id="self-connecting-nodes"></a><a href="#self-connecting-nodes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Self Connecting Nodes</h3>
<p>Self connecting nodes are used for maintaining the conversation state at the same node by entering user says and for entity based node identification for start nodes.</p>
<ol>
<li><p>Conversation state maintains the same node by default when new entities for that node are detected in most recent user says and they are not used for transitioning to other nodes. However bot will break in above scenarios if there is no change in entities unless sentences such as ‘<strong>Show me more options, I need other alternatives, I did not like this item. Is there any better product?’</strong> are present in connection responses while connecting node to itself.</p>
<p><em>For example: When you need pagination to display a carousel of nearby ATMs and based on the entity value ‘</em><strong><em>Show me more</em></strong><em>’ transition, the same node is triggered to show the next set of ATMs.</em></p></li>
<li><p>Entity based node detection for start nodes is done by creating a Start Node with a self connection and an Entity Presence/Value Based transition. If you start a new conversation with a message that contains the specific entity you used for transition, then the node will be detected.</p>
<p><em>For example: When user wants to book a vacation in a <em>city</em> to do an <em>activity</em>. <strong><em>‘Vacation Booking node’</em></strong> should be able to understand the users goal to book a vacation and collect the <em>city</em> and <em>activity</em> entities.</em></p>
<ul>
<li><strong><em>User says</em></strong> - User says section should contain different patterns of user utterances. Consider ‘Vacation Booking’ node -</li>
</ul>
<p><img src="/assets/bot-builder-user-says/self_connection_usersays.png" alt="Self Connecting Node User Says"></p>
<ul>
<li><strong><em>Bot says</em></strong> - Add a message to confirm that the bot understood user’s goal and ask user to provide the city information.</li>
</ul>
<p><img src="/assets/bot-builder-user-says/self_connection_botsays.png" alt="Self Connecting Node Bot Says"></p>
<p><img src="/assets/bot-builder-user-says/self_connection_flow1.png" alt="Self Connecting Node User Chat 1"></p>
<ul>
<li><strong><em>Entity</em></strong> - Create mandatory entities <em>city</em> and <em>activity</em>. Add the default message for both these entities.</li>
</ul>
<p><img src="/assets/bot-builder-user-says/self_connection_entity.png" alt="Self Connecting Node Entity"></p>
<ul>
<li><strong><em>Final Response</em></strong> - Perform validation via integrations and send out a message based on the validation result.</li>
</ul>
<p><img src="/assets/bot-builder-user-says/self_connection_finalresponse.png" alt="Self Connecting Node Final Response"></p>
<p><img src="/assets/bot-builder-user-says/self_connection_flow2.png" alt="Self Connecting Node User Chat 2"></p></li>
</ol>
<blockquote>
<p><em>Warning</em>: Perils of self connected nodes - When the node is self connected with the purpose to retry the collection of user’s phone number. Phone number used under a different context will still lead the user to the self connected node.</p>
</blockquote>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 6/25/2020</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/bot-builder/basic/creating-nodes"><span class="arrow-prev">← </span><span>Creating Nodes</span></a><a class="docs-next button" href="/bot-builder/basic/general-nodes"><span>General Nodes</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><div class="footer"><a href="https://haptik.ai/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/image_0.png" alt="Haptik Inc." width="100"/></a><div class="footer-columns"><div class="footer-column"><div class="footer-column-title">Tools</div><div class="footer-column-links"><a href="https://docs.haptik.ai/bot-builder/basic/introduction" class="footer-column-link">Bot Builder</a><a href="https://docs.haptik.ai/agent-chat/" class="footer-column-link">Agent Chat</a><a href="https://docs.haptik.ai/bot-analytics/" class="footer-column-link">Analytics</a></div></div><div class="footer-column"><div class="footer-column-title">Integrations</div><div class="footer-column-links"><a href="https://hellohaptik.github.io/haptik-ios-framework" class="footer-column-link">iOS SDK</a><a href="https://hellohaptik.github.io/haptik-android-lib" class="footer-column-link">Android SDK</a><a href="https://hellohaptik.github.io/javascript-xdk/" class="footer-column-link">Web SDK</a><a href="https://docs.haptik.ai/whatsapp/" class="footer-column-link">WhatsApp</a><a href="https://docs.haptik.ai/other/facebook" class="footer-column-link">Facebook</a><a href="https://docs.haptik.ai/webhooks/" class="footer-column-link">Bot API</a></div></div><div class="footer-column"><div class="footer-column-title">Others</div><div class="footer-column-links"><a href="https://docs.haptik.ai/hsl/" class="footer-column-link">HSL</a><a href="https://docs.haptik.ai/other/security" class="footer-column-link">Security</a><a href="https://docs.haptik.ai/other/sla" class="footer-column-link">SLA</a><a href="https://docs.haptik.ai/external-chat-tool/" class="footer-column-link">External Agent Chat Tool</a></div></div></div><div class="footer-copyright"></div></div><section class="copyright">Copyright © 2020 Haptik Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '224c7079e67e84a978d8b4621f6af16d',
                indexName: 'haptik',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>