<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Additional APIs · Haptik Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Move a chat to pending"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Additional APIs · Haptik Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.haptik.ai/"/><meta property="og:description" content="## Move a chat to pending"/><meta property="og:image" content="https://docs.haptik.ai/img/image_0.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.haptik.ai/img/image_0.png"/><link rel="shortcut icon" href="/img/image_0.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-106563119-6', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="/js/index.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/image_0.png" alt="Haptik Docs"/><h2 class="headerTitleWithLogo">Haptik Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/#tools" target="_self">Tools</a></li><li class=""><a href="/#integrations" target="_self">Integrations</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Webhooks</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/for-bot-builders">For Bot Builders</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Essentials of Bot Building</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/making-first-bot">Making Your First Bot</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/bot-hierarchy">Bot Hierarchy</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/creating-story">Creating a Story</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/creating-nodes">Creating Nodes</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/smalltalk">Small Talk</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/general-nodes">General Nodes</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/upload-graph-nodes">Upload Graph Nodes</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/user-says-guidelines">User Says Guidelines</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/bot-says">Bot Says</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/chat-elements">Chat Elements</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/connections">Connections</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/entities">Entities</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/forms">Forms</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/story-templates">Story Templates</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Configurations Settings</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/business">Business</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/platforms-deployment">Platforms Deployment</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/copypaste">Copy &amp; Paste on Bot Builder</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/sharebot">Share your IVA</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/transferbot">Transfer your IVA</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/bot-prompt-trigger">Bot Prompts</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">NLU</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/intent">Intent</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/managing-bot-state">Managing Bot Context and State</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/dialoguemanager">Dialogue Manager</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/disambiguation">Did you mean? (Disambiguation)</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/smart-assist">Smart Assist</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Conversation Design</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/conversation-design-introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/setting-flowchart-tool">Setting up a FlowChart tool</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/create-the-canvas">Create the canvas</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/whatsapp_as_a_platform">WhatsApp as a Platform</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/chat-initiation">Chat Initiation</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/chat-middle">Chat Middle</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/chat-end">Chat End</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/design-review">Design Review</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Integrations</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/integrations/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/integrations/integrating-custom-code">Code Node Integration</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/integrations/integrating-apis">Static Node Integration</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/integrations/integration-parameters">Integration Parameters</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Quality Assessment</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/testing-bot">Testing your bot</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/development-guidelines">Bot Development Life Cycle</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/testing-guidelines">Testing Guidelines</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/debugging-guidelines">How to debug your bot?</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/oracle-feedback">ORACLE Feedback</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/integrating-webviews-into-sdk">Integrating Webviews</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/advanced/integrating-with-external-bot">Integrating with External Bot</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Webhooks</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/bot-builder/integrations/additional-apis">Additional APIs</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Miscellaneous</h3><ul class=""><li class="navListItem"><a class="navItem" href="/bot-builder/basic/multiple-languages">Multiple Languages</a></li><li class="navListItem"><a class="navItem" href="/bot-builder/basic/building-voice-bots">Building Voice bots</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Additional APIs</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="move-a-chat-to-pending"></a><a href="#move-a-chat-to-pending" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Move a chat to pending</h2>
<p>This API allows you to move chats for a Bot to an Agent via a <code>POST</code> request to the Haptik Platform.</p>
<p>Example URL: <code>https://&lt;base-url&gt;/integration/external/v1.0/send_chat_to_agent/</code></p>
<blockquote>
<p>Note: The <code>base-url</code> will be provided by Haptik at the time of integration.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="headers"></a><a href="#headers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Headers</h4>
<pre><code class="hljs"><span class="hljs-symbol">Authorization:</span> Bearer <span class="hljs-params">&lt;TOKEN&gt;</span>
client-id: <span class="hljs-params">&lt;CLIENT_ID&gt;</span>
Content-Type: application/json
</code></pre>
<ul>
<li>Authorization - The Authorization header of each HTTP request should be “Bearer” followed by your token which will be provided by Haptik</li>
<li>client-id - The client id for your account which will be provided by Haptik</li>
<li>Content-Type - application/json</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="request"></a><a href="#request" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request</h4>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"team_name"</span>: <span class="hljs-string">"&lt;Name of the team&gt;"</span>,
    <span class="hljs-attr">"user_name"</span>: <span class="hljs-string">"&lt;haptik user name&gt;"</span>,
    <span class="hljs-attr">"business_id"</span>: <span class="hljs-string">"&lt;business_id&gt;"</span>,
    <span class="hljs-attr">"countdown"</span>: <span class="hljs-string">"&lt;time_in_seconds&gt;"</span>
}
</code></pre>
<ul>
<li>user_name (string): Identifier for the User provided by Haptik when invoking the Integration API</li>
<li>business_id (number): This is a numeric identifier for the channel where the User is messaging</li>
<li>team_name (string): Name of the team to which the chat is to be assigned. Can be fetched from the Teams page of Agent Chat Tool.</li>
<li>countdown (number): If value is set to 5, then after 5 seconds chat will be moved to the queue. Otherwise, the chat will be moved to the queue after 10 seconds (default), value can be from range 5 to 10 seconds.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="response"></a><a href="#response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response</h4>
<p>A successful request to the API will return a <code>200</code> status code with a JSON response object.</p>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"success"</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<ul>
<li>success: Indicates if the API was a success or failure</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="error-response"></a><a href="#error-response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Response</h4>
<p>If there is any error in the Headers or the Request body, then the Error message will be returned in a JSON as shown below:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"error_message"</span>: <span class="hljs-string">"user is not registered"</span>
}
</code></pre>
<p>Here is a list of some possible error messages</p>
<table>
<thead>
<tr><th>Error Message</th><th>Details</th></tr>
</thead>
<tbody>
<tr><td>client_id missing in headers</td><td>client-id is not passed in the Headers of the request</td></tr>
<tr><td>invalid client_id in headers</td><td>Incorrect client-id is passed in the headers</td></tr>
<tr><td>invalid authorization in headers</td><td>The Authorization header is not correct</td></tr>
<tr><td>token missing in headers</td><td>The Authorization token is not provided</td></tr>
<tr><td>invalid token provided</td><td>The Authorization token provided is incorrect</td></tr>
<tr><td>user_name missing in the request</td><td>The user_name is not provided in the request body</td></tr>
<tr><td>business_id missing in the request</td><td>The business_id is not provided in the request body</td></tr>
<tr><td>team_name missing in the request</td><td>The team_name is not provided in the request body</td></tr>
<tr><td>invalid user_name</td><td>The user_name provided is not valid for the Partner</td></tr>
<tr><td>invalid business_id provided</td><td>The business_id provided is not valid for the Partner</td></tr>
<tr><td>business &quot;&lt;business_id&gt;&quot; is inactive</td><td>The business is inactive for the Partner</td></tr>
<tr><td>invalid team_name provided</td><td>The team_name is not valid for the Partner</td></tr>
<tr><td>team &quot;&lt;team_name&gt;&quot; is inactive</td><td>The associated Team is inactive</td></tr>
<tr><td>user has not sent a message</td><td>The user has not had any chat on that Business</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="sample-curl-command"></a><a href="#sample-curl-command" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample CURL command</h4>
<pre><code class="hljs">curl -X POST \
    https:<span class="hljs-regexp">//</span>&lt;base-url&gt;<span class="hljs-regexp">/integration/</span>external<span class="hljs-regexp">/v1.0/</span>send_chat_to_agent<span class="hljs-regexp">/ \
  -H 'Authorization: Bearer &lt;TOKEN&gt;' \
  -H 'client-id: &lt;CLIENT_ID&gt;' \
  -H 'Content-Type: application/</span>json<span class="hljs-string">' \
  -d '</span>{
    <span class="hljs-string">"team_name"</span>: <span class="hljs-string">"&lt;Name of the team&gt;"</span>,
    <span class="hljs-string">"user_name"</span>: <span class="hljs-string">"&lt;haptik user name&gt;"</span>,
    <span class="hljs-string">"business_id"</span>: &lt;business_id&gt;
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="get-chat-transcripts"></a><a href="#get-chat-transcripts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Get Chat Transcripts</h2>
<p>This API allows you to get the chat history of the user for a conversation via a <code>GET</code> request to the Haptik Platform.</p>
<p>Example URL: <code>https://&lt;base-url&gt;/integration/external/v1.0/get_chat_history/</code></p>
<blockquote>
<p>Note: The <code>base-url</code> will be provided by Haptik at the time of integration.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="headers-1"></a><a href="#headers-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Headers</h4>
<pre><code class="hljs"><span class="hljs-symbol">Authorization:</span> Bearer <span class="hljs-params">&lt;TOKEN&gt;</span>
client-id: <span class="hljs-params">&lt;CLIENT_ID&gt;</span>
Content-Type: application/json
</code></pre>
<ul>
<li>Authorization - The Authorization header of each HTTP request should be “Bearer” followed by your token which will be provided by Haptik</li>
<li>client-id - The client id for your account which will be provided by Haptik</li>
<li>Content-Type - application/json</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="request-params"></a><a href="#request-params" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Params</h4>
<pre><code class="hljs"><span class="hljs-string">"conversation_no"</span>: <span class="hljs-string">"&lt;Conversation no of the chat for the user&gt;"</span>,
<span class="hljs-string">"user_name"</span>: <span class="hljs-string">"&lt;haptik user name&gt;"</span>,
<span class="hljs-string">"business_id"</span>: &lt;business_id&gt;,
<span class="hljs-string">"limit"</span>: <span class="hljs-string">"&lt;number of messages&gt;"</span>(<span class="hljs-keyword">optional</span>)
<span class="hljs-string">"respose_type"</span>: <span class="hljs-string">"&lt;response_type&gt;"</span>(<span class="hljs-keyword">optional</span>)
</code></pre>
<p>Note: Supported response types are <code>json</code> and <code>text</code>. The default response type is <code>json</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="response-1"></a><a href="#response-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response</h4>
<p>A successful request to the API will return a <code>200</code> status code with a default JSON response object containing chat data.</p>
<pre><code class="hljs css language-json">{  
  <span class="hljs-attr">"chat_json"</span>: [
        {
            <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Search places to visit{task}"</span>,
            <span class="hljs-attr">"sender"</span>: <span class="hljs-string">"user"</span>,
            <span class="hljs-attr">"message_id"</span>: <span class="hljs-number">1742</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"06/22/20 07:24:25 AM UTC"</span>
        },
        {
            <span class="hljs-attr">"text"</span>: <span class="hljs-string">"TEXT"</span>,
            <span class="hljs-attr">"sender"</span>: <span class="hljs-string">"bot"</span>,
            <span class="hljs-attr">"message_id"</span>: <span class="hljs-number">1743</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-string">"06/22/20 07:24:26 AM UTC"</span>
        }
    ]
}
</code></pre>
<p>Text type response</p>
<pre><code class="hljs">{  
  <span class="hljs-attr">"chat_text"</span>: <span class="hljs-string">"user: Search places to visit{task}\nbot: TEXT\n"</span>
}

</code></pre>
<ul>
<li>success: Indicates if the API was a success or failure</li>
<li>sender values:
<code>bot</code>: message is sent by the bot
<code>user</code>: message is sent by the user
<code>agent(&lt;AGENT_NAME&gt;)</code>: message is sent by the agent &lt;AGENT_NAME&gt; : name of the agent who sent the message</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="error-response-1"></a><a href="#error-response-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Response</h4>
<p>If there is any error in the Headers or the Request body, then the Error message will be returned in a JSON as shown below:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"error_message"</span>: <span class="hljs-string">"user has not sent a message"</span>
}
</code></pre>
<p>Here is a list of some possible error messages</p>
<table>
<thead>
<tr><th>Error Message</th><th>Details</th></tr>
</thead>
<tbody>
<tr><td>invalid client_id</td><td>Incorrect client-id is passed in the headers</td></tr>
<tr><td>invalid token</td><td>The Authorization token provided is incorrect</td></tr>
<tr><td>user_name missing</td><td>The user_name is not provided in the request params</td></tr>
<tr><td>business_id missing</td><td>The business_id is not provided in the request params</td></tr>
<tr><td>conversation_no missing</td><td>The conversation_no is not provided in the request params</td></tr>
<tr><td>invalid user_name</td><td>The user_name provided is not valid for the Partner</td></tr>
<tr><td>user has not sent a message</td><td>The user has not had any chat on that Business</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="sample-curl-command-1"></a><a href="#sample-curl-command-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample CURL command</h4>
<pre><code class="hljs">curl -<span class="hljs-keyword">X</span> GET \
  http<span class="hljs-variable">s:</span>//<span class="hljs-symbol">&lt;base-url&gt;</span>/integration/external/v1.<span class="hljs-number">0</span>/get_chat_history/?user_name=<span class="hljs-symbol">&lt;user_name&gt;</span>
  &amp;conversation_no=<span class="hljs-symbol">&lt;conversation_no&gt;</span>&amp;business_id=<span class="hljs-symbol">&lt;business_id&gt;</span>&amp;limit=<span class="hljs-symbol">&lt;limit&gt;</span> \
  -H <span class="hljs-string">'Authorization: Bearer &lt;TOKEN&gt;'</span> \
  -H <span class="hljs-string">'client-id: &lt;CLIENT_ID&gt;'</span> \
  -H <span class="hljs-string">'Content-Type: application/json'</span> \
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="faq-node-creation-apis-for-kms"></a><a href="#faq-node-creation-apis-for-kms" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FAQ Node Creation APIs for KMS</h2>
<p>We have many clients who need FAQ bots. Every time when we want to change the content of these FAQs (Q&amp;As), a new CSV with Node name, Question and Answer in a defined format needs to be uploaded. (Format given below)</p>
<p>We have developed an API that can be integrated with the client KMS(Knowledge Management Systems) via any intermediate layer and every time when data gets changed in KMS, it should call this API to keep data in sync with the Haptik systems.</p>
<p>This API allows you to create/update/delete faq nodes via a <code>POST</code> request to Haptik Platform.</p>
<blockquote>
<p>Note: The <code>base-url</code> will be provided by Haptik at the time of integration.</p>
</blockquote>
<p>FAQ Node creation process API consists of two parts:</p>
<ol>
<li><p><strong>Submit the CSV</strong>: To handle the large csv files, this API takes the request data and after validation submit it to celery worker and returns the <code>task id</code>, which executes the task asynchronously.</p></li>
<li><p><strong>Polling API</strong> to fetch the status of submitted <code>task id</code></p></li>
</ol>
<p>Example URL: <code>https://&lt;base-url&gt;/mogambo_api/nodes/faq/create/</code></p>
<p><img src="/assets/faq_node_csv_format.png" alt="CSV Format"></p>
<pre><code class="hljs"><span class="hljs-number">1</span>. node_name: Name of the <span class="hljs-keyword">node</span><span class="hljs-title">, node</span> name should be unique

<span class="hljs-number">2</span>. Question(<span class="hljs-keyword">User</span> <span class="hljs-title">Says</span>): Independent Responses under <span class="hljs-keyword">User</span> <span class="hljs-title">Says</span> to detect this FAQ <span class="hljs-keyword">node</span>. <span class="hljs-title">Multiple</span> <span class="hljs-keyword">user</span> <span class="hljs-title">says</span> for single <span class="hljs-keyword">node</span> <span class="hljs-title">can</span> be passed as pipe(|) separated values(refer the sample row <span class="hljs-keyword">in</span> image above)

<span class="hljs-number">3</span>. answer(bot says): A <span class="hljs-keyword">node</span> <span class="hljs-title">can</span> have single <span class="hljs-keyword">or</span> multiple bot says, to pass multiple bot says use `<span class="hljs-tag">&lt;m&gt;</span>` <span class="hljs-keyword">tag</span> <span class="hljs-title">as</span> delimiter
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="headers-2"></a><a href="#headers-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Headers</h4>
<pre><code class="hljs"><span class="hljs-symbol">Authorization:</span> Bearer <span class="hljs-params">&lt;TOKEN&gt;</span>
client-id: <span class="hljs-params">&lt;CLIENT_ID&gt;</span>
Content-Type: multipart/form-data
</code></pre>
<ul>
<li>Authorization - The Authorization header of each HTTP request should be “Bearer” followed by your token which will be provided by Haptik</li>
<li>client-id - The client id for your account which will be provided by Haptik</li>
<li>Content-Type - multipart/form-data</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="request-body"></a><a href="#request-body" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Request Body</h4>
<pre><code class="hljs css language-form-data"><span class="hljs-string">"domain_name"</span>: <span class="hljs-string">"&lt;Name of the Domain/Bot&gt;"</span>,
<span class="hljs-string">"csv_file"</span>: filename.<span class="hljs-built_in">csv</span>,
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="response-2"></a><a href="#response-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response</h4>
<p>A successful request to the API will return a <code>200</code> status code with a JSON response object.</p>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"success"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"body"</span>: {
        <span class="hljs-attr">"task_id"</span>: <span class="hljs-string">"fe139ce5-f4c3-4383-bacb-64a546cb0b6c"</span>
    },
    <span class="hljs-attr">"error"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"meta"</span>: {}
}
</code></pre>
<ul>
<li>success flag Indicates if the API was a success or failure</li>
<li>task_id: Job id for the submitted task</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="error-response-2"></a><a href="#error-response-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error Response</h4>
<p>If there is any error in the Headers or the Request body, then the Error message will be returned in a JSON as shown below:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"error_message"</span>: <span class="hljs-string">"invalid doman"</span>
}
</code></pre>
<table>
<thead>
<tr><th>Error Code</th><th style="text-align:center">Error Message</th></tr>
</thead>
<tbody>
<tr><td>401</td><td style="text-align:center">Unauthorized Access or invalid token</td></tr>
<tr><td>400</td><td style="text-align:center">Invalid or bad request body</td></tr>
<tr><td>403</td><td style="text-align:center">Access Forbidden</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="sample-curl-command-to-submit-csv-file-and-get-job-id"></a><a href="#sample-curl-command-to-submit-csv-file-and-get-job-id" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample Curl Command to submit csv file and get job id</h4>
<pre><code class="hljs">curl -X POST \
  https://&lt;base-url&gt;/mogambo_api/nodes/faq/create/ \
  -<span class="ruby">H <span class="hljs-string">'authorization: Bearer &lt;token&gt;'</span> \
</span>  -<span class="ruby">H <span class="hljs-string">'client-id: &lt;client-id&gt;'</span> \
</span>  -<span class="ruby">H <span class="hljs-string">'content-type: multipart/form-data; 
</span></span>  -<span class="ruby"><span class="hljs-string">F '</span>domain_name=&lt;domain_name&gt;<span class="hljs-string">' \
</span></span>  -<span class="ruby"><span class="hljs-string">F csv_file=@filename.csv
</span></span></code></pre>
<blockquote>
<p>Note: This API follows the upsert [UPDATE and INSERT] behaviour i.e. every time when new CSV gets uploaded it makes the existing FAQ nodes for that domain inactive, creates new nodes for the rows mentioned in the CSV and updates Nodes with same names with the new User Says and Bot Says from the CSV.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="polling-api-to-fetch-submitted-task-status"></a><a href="#polling-api-to-fetch-submitted-task-status" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Polling API to fetch submitted task Status</h2>
<p>This API allows you to see the status of submitted task id
via a <code>GET</code> request to Haptik Platform.</p>
<p>Example URL: <code>https://&lt;base-url&gt;/mogambo_api/nodes/faq/create/status/&lt;task_id&gt;/</code></p>
<blockquote>
<p>task_id: Id of task which gets created when we submit csv to node creation api</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="headers-3"></a><a href="#headers-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Headers</h4>
<pre><code class="hljs"><span class="hljs-symbol">Authorization:</span> Bearer <span class="hljs-params">&lt;TOKEN&gt;</span>
client-id: <span class="hljs-params">&lt;CLIENT_ID&gt;</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="response-3"></a><a href="#response-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Response</h4>
<p>A successful request to the API will return a <code>200</code> status code with a JSON response object.</p>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"success"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"body"</span>: {
        <span class="hljs-attr">"status"</span>: <span class="hljs-string">"all nodes has been created successfully"</span>
    },
    <span class="hljs-attr">"error"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"meta"</span>: {}
}
</code></pre>
<ul>
<li>success flag Indicates if the API was a success or failure</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="sample-curl-command-to-get-the-task-status"></a><a href="#sample-curl-command-to-get-the-task-status" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sample Curl Command to get the task status</h4>
<pre><code class="hljs"><span class="hljs-attr">curl</span> <span class="hljs-string">-X GET \
  https://&lt;base-url&gt;/mogambo_api/nodes/faq/create/status/&lt;task_id&gt;/ \
  -H 'authorization: Bearer &lt;TOKEN&gt;' \
  -H 'client-id: &lt;CLIENT ID&gt;' \
</span></code></pre>
<h4><a class="anchor" aria-hidden="true" id="possible-statuses"></a><a href="#possible-statuses" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Possible Statuses:</h4>
<p><strong>Error/Exception</strong>: shows the exception/error occured for the last node and stops the execution</p>
<p><strong>In Progress</strong>: Node Creation is in progress</p>
<p><strong>Success</strong>: Nodes has been created successfully</p>
<h2><a class="anchor" aria-hidden="true" id="best-practices"></a><a href="#best-practices" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Best Practices</h2>
<p><strong>1. Assign Chat to Agent</strong> In some scenarios, where integration response fails or some unknown exception occurs then instead of sending bot break message we can also directly assign chat to an agent for better user experience. <Coming Soon></p>
<p><strong>2.Handle textual content</strong> - Everytime we want to change bot's response, a code change is required. To avoid that pain, we can use <strong>key value stores</strong>. Any person with zero to little tech knowledge can change bot response from key value store (with GUI) by updating the message copy corresponding to that unique message key or ID. This message key can be shared with the developer and fetch the response using that key.</p>
<p><strong>3. HSLs</strong>  - Haptik defines a superset of UI elements that are available across multiple platforms. These UI elements are then converted to their platform equivalent (js-sdk, android, ios, facebook-messenger, etc..) if they are not available on that specific platform. Eg. Forms are converted to quick replies on the Facebook platform and collected over free form. <a href="https://docs.haptik.ai/hsl/">for more detail read here</a></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 9/18/2020</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/bot-builder/advanced/integrating-with-external-bot"><span class="arrow-prev">← </span><span>Integrating with External Bot</span></a><a class="docs-next button" href="/bot-builder/basic/multiple-languages"><span>Multiple Languages</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#move-a-chat-to-pending">Move a chat to pending</a></li><li><a href="#get-chat-transcripts">Get Chat Transcripts</a></li><li><a href="#faq-node-creation-apis-for-kms">FAQ Node Creation APIs for KMS</a></li><li><a href="#polling-api-to-fetch-submitted-task-status">Polling API to fetch submitted task Status</a></li><li><a href="#best-practices">Best Practices</a></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="footer"><a href="https://haptik.ai/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/image_0.png" alt="Haptik Inc." width="100"/></a><div class="footer-columns"><div class="footer-column"><div class="footer-column-title">Tools</div><div class="footer-column-links"><a href="https://docs.haptik.ai/bot-builder/basic/introduction" class="footer-column-link">Bot Builder</a><a href="https://docs.haptik.ai/agent-chat/" class="footer-column-link">Agent Chat</a><a href="https://docs.haptik.ai/bot-analytics/" class="footer-column-link">Analytics</a></div></div><div class="footer-column"><div class="footer-column-title">Integrations</div><div class="footer-column-links"><a href="https://docs.haptik.ai/ios-sdk/" class="footer-column-link">iOS SDK</a><a href="https://docs.haptik.ai/android-sdk/" class="footer-column-link">Android SDK</a><a href="https://docs.haptik.ai/web-sdk/" class="footer-column-link">Web SDK</a><a href="https://docs.haptik.ai/whatsapp/" class="footer-column-link">WhatsApp</a><a href="https://docs.haptik.ai/other/facebook" class="footer-column-link">Facebook</a><a href="https://docs.haptik.ai/webhooks/" class="footer-column-link">Bot API</a></div></div><div class="footer-column"><div class="footer-column-title">Others</div><div class="footer-column-links"><a href="https://docs.haptik.ai/hsl/" class="footer-column-link">HSL</a><a href="https://docs.haptik.ai/other/security" class="footer-column-link">Security</a><a href="https://docs.haptik.ai/other/sla" class="footer-column-link">SLA</a><a href="https://docs.haptik.ai/external-chat-tool/" class="footer-column-link">External Agent Chat Tool</a></div></div></div><div class="footer-copyright"></div></div><section class="copyright">Copyright © 2020 Haptik Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '224c7079e67e84a978d8b4621f6af16d',
                indexName: 'haptik',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>