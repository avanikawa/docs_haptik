<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Push Notifications · Haptik Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Push notifications can considerably enhance your customer experience. Haptik can also be configured to receive and handle _Push Notifications_ for the conversation."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Push Notifications · Haptik Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.haptik.ai/"/><meta property="og:description" content="Push notifications can considerably enhance your customer experience. Haptik can also be configured to receive and handle _Push Notifications_ for the conversation."/><meta property="og:image" content="https://docs.haptik.ai/img/image_0.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.haptik.ai/img/image_0.png"/><link rel="shortcut icon" href="/img/image_0.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-106563119-6', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="/js/index.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/image_0.png" alt="Haptik Docs"/><h2 class="headerTitleWithLogo">Haptik Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/#tools" target="_self">Tools</a></li><li class=""><a href="/#integrations" target="_self">Integrations</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span> </span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle"> </h3><ul class=""><li class="navListItem"><a class="navItem" href="/ios-sdk/">Quick Start</a></li><li class="navListItem"><a class="navItem" href="/ios-sdk/sign-up">Authentication</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/ios-sdk/notifications">Push Notifications</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Advanced</h4><ul><li class="navListItem"><a class="navItem" href="/ios-sdk/permissions">Required Permissions</a></li><li class="navListItem"><a class="navItem" href="/ios-sdk/theming">Theming</a></li><li class="navListItem"><a class="navItem" href="/ios-sdk/conversations">Conversation</a></li><li class="navListItem"><a class="navItem" href="/ios-sdk/rate-share">Rate &amp; Share</a></li><li class="navListItem"><a class="navItem" href="/ios-sdk/voice">Voice Support</a></li><li class="navListItem"><a class="navItem" href="/ios-sdk/location">Location Support</a></li><li class="navListItem"><a class="navItem" href="/ios-sdk/analytics">Analytics</a></li><li class="navListItem"><a class="navItem" href="/ios-sdk/features">Additional Features</a></li></ul></div><li class="navListItem"><a class="navItem" href="/ios-sdk/sdk-sample">Sample App</a></li><li class="navListItem"><a class="navItem" href="/ios-sdk/faq">Troubleshooting</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Push Notifications</h1></header><article><div><span><p>Push notifications can considerably enhance your customer experience. Haptik can also be configured to receive and handle <em>Push Notifications</em> for the conversation.</p>
<h2><a class="anchor" aria-hidden="true" id="checklist"></a><a href="#checklist" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Checklist</h2>
<ol>
<li>Make sure you have valid APNS (.p8) certificate shared with Haptik</li>
<li>Make sure your app supports push notifications under Signing &amp; capablities</li>
</ol>
<blockquote>
<p>For detailed instructions on how to request an authentication token signing key, see <a href="https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/establishing_a_token-based_connection_to_apns">Establishing a Token-Based Connection to APNs.</a></p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="sync-device-token"></a><a href="#sync-device-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sync Device Token</h2>
<p>You just need to pass the <strong>Device Token</strong> to Haptik for it to trigger push notifications from the backend whenever required. One point where you need to set the <code>deviceToken</code> is when the application gets the token after requesting. See the examples below:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-88-tab-89" class="nav-link active" data-group="group_88" data-tab="tab-group-88-content-89">Objective-C</div><div id="tab-group-88-tab-90" class="nav-link" data-group="group_88" data-tab="tab-group-88-content-90">Swift</div></div><div class="tab-content"><div id="tab-group-88-content-89" class="tab-pane active" data-group="group_88" tabindex="-1"><div><span><pre><code class="hljs css language-Objective-C"><span class="hljs-comment">// Objective-C</span><br /><span class="hljs-selector-tag">-</span> (void)<span class="hljs-selector-tag">application</span><span class="hljs-selector-pseudo">:(UIApplication</span> *)<span class="hljs-selector-tag">application</span> <span class="hljs-selector-tag">didRegisterForRemoteNotificationsWithDeviceToken</span><span class="hljs-selector-pseudo">:(NSData</span> *)<span class="hljs-selector-tag">deviceToken</span> {<br /><br />    ...<br /><br />    <span class="hljs-selector-attr">[[Haptik sharedSDK]</span> <span class="hljs-selector-tag">setDeviceToken</span><span class="hljs-selector-pseudo">:deviceToken</span>];<br /><br />    <span class="hljs-comment">// or if you wish to set it as a string directly, use:</span><br /><br />    <span class="hljs-selector-attr">[[Haptik sharedSDK]</span> <span class="hljs-selector-tag">setDeviceTokenAsString</span><span class="hljs-selector-pseudo">:deviceTokenString</span>];<br />}<br /></code></pre>
</span></div></div><div id="tab-group-88-content-90" class="tab-pane" data-group="group_88" tabindex="-1"><div><span><pre><code class="hljs css language-Swift"><span class="hljs-comment">// Swift</span><br /><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">application</span><span class="hljs-params">(<span class="hljs-number">_</span> application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data)</span></span> {<br /><br />        ...<br /><br />        <span class="hljs-type">Haptik</span>.sharedSDK().setDeviceToken(deviceToken)<br /><br />        <span class="hljs-comment">// or if you wish to set it as a string directly, use:</span><br /><br />        <span class="hljs-type">Haptik</span>.sharedSDK().setDeviceTokenAsString(deviceTokenString)<br />    }<br /></code></pre>
</span></div></div></div></div>
<hr>
<h2><a class="anchor" aria-hidden="true" id="handle-notification-tap"></a><a href="#handle-notification-tap" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handle Notification Tap</h2>
<p>The Haptik SDK is capable of handling it's notifications also. It's also possible to determine whether notification payload is Haptik-specific or not. If yes then let haptik handle the notification.</p>
<p>For Haptik to handle it's own notifications, you have to pass the required <strong>notification response</strong> that you get in the <strong>notifications payload</strong> and the instance of the <code>viewController</code> from where the notifications should be handled. It will take the user directly to the conversation screen. See example below:</p>
<h5><a class="anchor" aria-hidden="true" id="for-ios-9x-and-below-ios-10x"></a><a href="#for-ios-9x-and-below-ios-10x" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>For iOS 9.x and below iOS 10.x</h5>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-91-tab-92" class="nav-link active" data-group="group_91" data-tab="tab-group-91-content-92">Objective-C</div><div id="tab-group-91-tab-93" class="nav-link" data-group="group_91" data-tab="tab-group-91-content-93">Swift</div></div><div class="tab-content"><div id="tab-group-91-content-92" class="tab-pane active" data-group="group_91" tabindex="-1"><div><span><pre><code class="hljs css language-Objective-C"><span class="hljs-comment">// Objective-C</span><br /> - (<span class="hljs-keyword">void</span>)application:(<span class="hljs-built_in">UIApplication</span> *)application didReceiveRemoteNotification:(<span class="hljs-built_in">NSDictionary</span> *)userInfo {<br /><br /> ...<br /><br /> <span class="hljs-built_in">BOOL</span> canBeHandledByHaptik = [[Haptik sharedSDK] canHandleNotificationWithUserInfo:userInfo];<br /><br /> <span class="hljs-keyword">if</span> (canBeHandledByHaptik) {<br /><br />    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@"do housekeeping"</span>);<br />    [[Haptik sharedSDK] didReceiveHaptikRemoteNotification:userInfo<br />                                                controller:((<span class="hljs-built_in">UINavigationController</span> *)<span class="hljs-keyword">self</span>.window.rootViewController).visibleViewController];<br />    }<br /> }<br /></code></pre>
</span></div></div><div id="tab-group-91-content-93" class="tab-pane" data-group="group_91" tabindex="-1"><div><span><pre><code class="hljs css language-Swift"><span class="hljs-comment">// Swift</span><br /><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">application</span><span class="hljs-params">(<span class="hljs-number">_</span> application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : <span class="hljs-keyword">Any</span>])</span></span> {<br /><br />        <span class="hljs-comment">// Check if the notification received belongs to haptik and take action accordingly</span><br /><br />        <span class="hljs-keyword">let</span> isHaptikNotification = <span class="hljs-type">Haptik</span>.sharedSDK().canHandleNotification(userInfo: userInfo <span class="hljs-keyword">as</span>! [<span class="hljs-type">String</span> : <span class="hljs-type">Any</span>])<br /><br />        <span class="hljs-keyword">if</span> isHaptikNotification {<br /><br />            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Do Housekeeping"</span>)<br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> rootVC = <span class="hljs-keyword">self</span>.window?.rootViewController {<br />                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> controller = rootVC <span class="hljs-keyword">as</span>? <span class="hljs-type">UINavigationController</span> {<br /><br />                    <span class="hljs-comment">// You need to pass an instance of a viewController from which the user will be taken to the conversationViewController (where the user will be conversing)</span><br />                    <span class="hljs-comment">// on the tap of the Notification</span><br />                    <span class="hljs-type">Haptik</span>.sharedSDK().didReceiveRemoteNotification(userInfo <span class="hljs-keyword">as</span>! [<span class="hljs-type">String</span> : <span class="hljs-type">Any</span>], controller: controller.visibleViewController!)<br />                }<br />            }<br />        }<br />    }<br /></code></pre>
</span></div></div></div></div>
<h5><a class="anchor" aria-hidden="true" id="for-ios-10x-and-above"></a><a href="#for-ios-10x-and-above" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>For iOS 10.x and above</h5>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-94-tab-95" class="nav-link active" data-group="group_94" data-tab="tab-group-94-content-95">Objective-C</div><div id="tab-group-94-tab-96" class="nav-link" data-group="group_94" data-tab="tab-group-94-content-96">Swift</div></div><div class="tab-content"><div id="tab-group-94-content-95" class="tab-pane active" data-group="group_94" tabindex="-1"><div><span><pre><code class="hljs css language-Objective-C"><span class="hljs-comment">// Objective-C</span><br />- (<span class="hljs-keyword">void</span>)<span class="hljs-string">userNotificationCenter:</span>(UNUserNotificationCenter *)center <span class="hljs-string">didReceiveNotificationResponse:</span>(UNNotificationResponse *)response<br /><span class="hljs-symbol">          withCompletionHandler:</span>(<span class="hljs-keyword">void</span>(^)(<span class="hljs-keyword">void</span>))completionHandler {<br /><br />     ...<br /><br />     BOOL canBeHandledByHaptik = [[Haptik sharedSDK] <span class="hljs-string">canHandleNotificationWithUserInfo:</span>userInfo];<br /><br />     <span class="hljs-keyword">if</span> (canBeHandledByHaptik) {<br /><br />        NSLog(@<span class="hljs-string">"do housekeeping"</span>);<br />        [[Haptik sharedSDK] <span class="hljs-string">didReceiveHaptikNotificationResponse:</span>response<br /><span class="hljs-symbol">                                                      controller:</span>((UINavigationController *)self.window.rootViewController).visibleViewController];<br />        }<br /> }<br /></code></pre>
</span></div></div><div id="tab-group-94-content-96" class="tab-pane" data-group="group_94" tabindex="-1"><div><span><pre><code class="hljs css language-Swift"><span class="hljs-comment">// Swift</span><br /><span class="hljs-meta">@available</span>(iOS <span class="hljs-number">10.0</span>, *)<br />    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">userNotificationCenter</span><span class="hljs-params">(<span class="hljs-number">_</span> center: UNUserNotificationCenter,<br />                                didReceive response: UNNotificationResponse,<br />                                withCompletionHandler completionHandler: @escaping <span class="hljs-params">()</span></span></span> -&gt; <span class="hljs-type">Void</span>) {<br /><br />        <span class="hljs-comment">// Check if the notification received belongs to haptik and take action accordingly</span><br />        <span class="hljs-keyword">let</span> isHaptikNotification = <span class="hljs-type">Haptik</span>.sharedSDK().canHandleNotification(with: response)<br /><br />        <span class="hljs-keyword">if</span> isHaptikNotification {<br /><br />            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Do Housekeeping"</span>)<br /><br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> rootVC = <span class="hljs-keyword">self</span>.window?.rootViewController {<br />                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> controller = rootVC <span class="hljs-keyword">as</span>? <span class="hljs-type">UINavigationController</span> {<br /><br />                    <span class="hljs-comment">// You need to pass an instance of a viewController from which the user will be taken to the conversationViewController (where the user will be conversing)</span><br />                    <span class="hljs-comment">// on the tap of the Notification</span><br />                    <span class="hljs-type">Haptik</span>.sharedSDK().didReceive(response, controller: controller.visibleViewController!)<br />                }<br />            }<br />        }<br />    }<br /></code></pre>
</span></div></div></div></div>
<h2><a class="anchor" aria-hidden="true" id="advanced-handling"></a><a href="#advanced-handling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advanced Handling</h2>
<p>If you want to take control on taking the user to the conversation by yourself, you can do that too. After checking if the notification belongs to Haptik, you just have to <strong>tell the SDK to prepare for the notification</strong> so that it internally gets ready for handling the respective changes and will <strong>return you the unique <code>'businessvianame</code> of the conversation</strong> that the notification belongs too.</p>
<p>After that you can just make another instance of the Haptik's conversation controller and take the user to it like you do.</p>
<p>Check example implementation below:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-97-tab-98" class="nav-link active" data-group="group_97" data-tab="tab-group-97-content-98">Objective-C</div><div id="tab-group-97-tab-99" class="nav-link" data-group="group_97" data-tab="tab-group-97-content-99">Swift</div></div><div class="tab-content"><div id="tab-group-97-content-98" class="tab-pane active" data-group="group_97" tabindex="-1"><div><span><pre><code class="hljs css language-Objective-C"><span class="hljs-comment">// Objective-C</span><br /><br />- (<span class="hljs-keyword">void</span>)<span class="hljs-string">userNotificationCenter:</span>(UNUserNotificationCenter *)center<br /><span class="hljs-string">didReceiveNotificationResponse:</span>(UNNotificationResponse *)response<br /><span class="hljs-symbol">         withCompletionHandler:</span>(<span class="hljs-keyword">void</span>(^)(<span class="hljs-keyword">void</span>))completionHandler {<br /><br />    <span class="hljs-keyword">if</span> ([[Haptik sharedSDK] <span class="hljs-string">canHandleNotificationWithResponse:</span>response]) {<br /><br />        UIViewController *visibleVC = ((UINavigationController *)self.window.rootViewController).visibleViewController;<br />        NSString *viaName = [[Haptik sharedSDK] <span class="hljs-string">prepareHaptikNotificationForResponse:</span>response];<br /><br />        [[Haptik sharedSDK] <span class="hljs-string">launchChannelWith:</span>viaName <span class="hljs-string">launchMessage:</span>@<span class="hljs-string">""</span> <span class="hljs-string">hideLaunchMessage:</span>NO <span class="hljs-string">controller:</span>visibleVC];<br />    }<br /><br />    completionHandler();<br />}<br /></code></pre>
</span></div></div><div id="tab-group-97-content-99" class="tab-pane" data-group="group_97" tabindex="-1"><div><span><pre><code class="hljs css language-Swift"><span class="hljs-comment">// Swift</span><br /><br /><span class="hljs-meta">@available</span>(iOS <span class="hljs-number">10.0</span>, *)<br />    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">userNotificationCenter</span><span class="hljs-params">(<span class="hljs-number">_</span> center: UNUserNotificationCenter,<br />                                didReceive response: UNNotificationResponse,<br />                                withCompletionHandler completionHandler: @escaping <span class="hljs-params">()</span></span></span> -&gt; <span class="hljs-type">Void</span>) {<br /><br />        <span class="hljs-comment">// Check if the notification received belongs to haptik and take action accordingly</span><br />        <span class="hljs-keyword">let</span> isHaptikNotification = <span class="hljs-type">Haptik</span>.sharedSDK().canHandleNotification(with: response)<br /><br />        <span class="hljs-keyword">if</span> isHaptikNotification {<br /><br />            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Do Housekeeping"</span>)<br /><br />            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> rootVC = <span class="hljs-keyword">self</span>.window?.rootViewController {<br />                <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> controller = rootVC <span class="hljs-keyword">as</span>? <span class="hljs-type">UINavigationController</span> {<br /><br />                    <span class="hljs-keyword">let</span> viaName = <span class="hljs-type">Haptik</span>.sharedSDK().prepareNotification(<span class="hljs-keyword">for</span>: response)<br />                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> viaName = viaName {<br />                        <span class="hljs-type">Haptik</span>.sharedSDK().launchChannel(with: viaName, launchMessage: <span class="hljs-literal">nil</span>, hideLaunchMessage: <span class="hljs-literal">false</span>, controller: controller.visibleViewController!)<br />                    }<br />                }<br />            }<br />        }<br />    }<br /></code></pre>
</span></div></div></div></div>
<h4><a class="anchor" aria-hidden="true" id="class-validations"></a><a href="#class-validations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Class Validations</h4>
<p>You can also check if the <code>visibleViewController</code> is of type Haptik's Conversation Controller. You may need to check it when you don't want to push another haptik's conversation controller over an existing conversation controller while handling notifications yourself.</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-100-tab-101" class="nav-link active" data-group="group_100" data-tab="tab-group-100-content-101">Objective-C</div><div id="tab-group-100-tab-102" class="nav-link" data-group="group_100" data-tab="tab-group-100-content-102">Swift</div></div><div class="tab-content"><div id="tab-group-100-content-101" class="tab-pane active" data-group="group_100" tabindex="-1"><div><span><pre><code class="hljs css language-Objective-C"><span class="hljs-comment">// Objective-C</span><br /><br /><span class="hljs-keyword">return</span> ([visibleViewController isKindOfClass:<span class="hljs-built_in">HPConversationClass</span>()]);<br /><br /></code></pre>
</span></div></div><div id="tab-group-100-content-102" class="tab-pane" data-group="group_100" tabindex="-1"><div><span><pre><code class="hljs css language-Swift"><span class="hljs-comment">// Swift</span><br /><br /><span class="hljs-keyword">return</span> visibleViewController.isKind(of: <span class="hljs-type">HPConversationClass</span>())<br /></code></pre>
</span></div></div></div></div>
<p>You can additionally also check if a conversation controller belongs to a specific 'businessvianame' or not. Check example below:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-103-tab-104" class="nav-link active" data-group="group_103" data-tab="tab-group-103-content-104">Objective-C</div><div id="tab-group-103-tab-105" class="nav-link" data-group="group_103" data-tab="tab-group-103-content-105">Swift</div></div><div class="tab-content"><div id="tab-group-103-content-104" class="tab-pane active" data-group="group_103" tabindex="-1"><div><span><pre><code class="hljs css language-Objective-C"><span class="hljs-comment">// Objective-C</span><br /><br /><span class="hljs-keyword">if</span> (<span class="hljs-constructor">HPCheckConversationForViaName(<span class="hljs-params">viaName</span>, <span class="hljs-params">conversationController</span>)</span>) {<br />    <span class="hljs-comment">// YES</span><br />}<br /><br /></code></pre>
</span></div></div><div id="tab-group-103-content-105" class="tab-pane" data-group="group_103" tabindex="-1"><div><span><pre><code class="hljs css language-Swift"><span class="hljs-comment">// Swift</span><br /><br /><span class="hljs-keyword">if</span> <span class="hljs-type">HPCheckConversationForViaName</span>(viaName, conversationController) {<br />    <span class="hljs-comment">// true</span><br />}<br /></code></pre>
</span></div></div></div></div></span></div></article></div><div class="docLastUpdate"><em>Last updated on 8/20/2020</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/ios-sdk/sign-up"><span class="arrow-prev">← </span><span>Authentication</span></a><a class="docs-next button" href="/ios-sdk/permissions"><span>Required Permissions</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#checklist">Checklist</a></li><li><a href="#sync-device-token">Sync Device Token</a></li><li><a href="#handle-notification-tap">Handle Notification Tap</a></li><li><a href="#advanced-handling">Advanced Handling</a></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="footer"><a href="https://haptik.ai/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/image_0.png" alt="Haptik Inc." width="100"/></a><div class="footer-columns"><div class="footer-column"><div class="footer-column-title">Tools</div><div class="footer-column-links"><a href="https://docs.haptik.ai/bot-builder/basic/introduction" class="footer-column-link">Bot Builder</a><a href="https://docs.haptik.ai/agent-chat/" class="footer-column-link">Agent Chat</a><a href="https://docs.haptik.ai/bot-analytics/" class="footer-column-link">Analytics</a></div></div><div class="footer-column"><div class="footer-column-title">Integrations</div><div class="footer-column-links"><a href="https://docs.haptik.ai/ios-sdk/" class="footer-column-link">iOS SDK</a><a href="https://docs.haptik.ai/android-sdk/" class="footer-column-link">Android SDK</a><a href="https://docs.haptik.ai/web-sdk/" class="footer-column-link">Web SDK</a><a href="https://docs.haptik.ai/whatsapp/" class="footer-column-link">WhatsApp</a><a href="https://docs.haptik.ai/other/facebook" class="footer-column-link">Facebook</a><a href="https://docs.haptik.ai/webhooks/" class="footer-column-link">Bot API</a></div></div><div class="footer-column"><div class="footer-column-title">Others</div><div class="footer-column-links"><a href="https://docs.haptik.ai/hsl/" class="footer-column-link">HSL</a><a href="https://docs.haptik.ai/other/security" class="footer-column-link">Security</a><a href="https://docs.haptik.ai/other/sla" class="footer-column-link">SLA</a><a href="https://docs.haptik.ai/external-chat-tool/" class="footer-column-link">External Agent Chat Tool</a></div></div></div><div class="footer-copyright"></div></div><section class="copyright">Copyright © 2020 Haptik Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '224c7079e67e84a978d8b4621f6af16d',
                indexName: 'haptik',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>