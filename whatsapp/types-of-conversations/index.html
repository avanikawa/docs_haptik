<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Types of Conversations · Haptik Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="There are two types of conversations that are possible on WhatsApp."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Types of Conversations · Haptik Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.haptik.ai/"/><meta property="og:description" content="There are two types of conversations that are possible on WhatsApp."/><meta property="og:image" content="https://docs.haptik.ai/img/image_0.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.haptik.ai/img/image_0.png"/><link rel="shortcut icon" href="/img/image_0.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-106563119-6', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="/js/index.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/image_0.png" alt="Haptik Docs"/><h2 class="headerTitleWithLogo">Haptik Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/#tools" target="_self">Tools</a></li><li class=""><a href="/#integrations" target="_self">Integrations</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Types of Conversations</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/whatsapp/">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/whatsapp/business-setup">Business Setup</a></li><li class="navListItem"><a class="navItem" href="/whatsapp/technical-setup">Technical Setup</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Types of Conversations</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/whatsapp/types-of-conversations">Types of Conversations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Deploying the Bot</h3><ul class=""><li class="navListItem"><a class="navItem" href="/whatsapp/bot-deploy-whatsapp">Deploy Bot to WhatsApp</a></li><li class="navListItem"><a class="navItem" href="/whatsapp/whatsapp-language-settings">WhatsApp Language Settings</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Sending Notifications</h3><ul class=""><li class="navListItem"><a class="navItem" href="/whatsapp/sending-notifications">Sending Notifications</a></li><li class="navListItem"><a class="navItem" href="/whatsapp/getting-user-opt-ins">Getting User Opt-Ins</a></li><li class="navListItem"><a class="navItem" href="/whatsapp/allowed-notification-types">Allowed Notification Types</a></li><li class="navListItem"><a class="navItem" href="/whatsapp/disallowed-notification-types">Disallowed Notification Types</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Types of Conversations</h1></header><article><div><span><p>There are two types of conversations that are possible on WhatsApp.
The first type is the regular user initiated conversation where the user sends a message to the whatsapp bot and the bot replies back to the user. The bot is allowed to reply back to the user within a 24 hour window from the last message sent by the user.</p>
<p>The second type of conversational flow is bot initiated conversations. In this type whenever a transactional event occurs for eg: user bought a movie ticket, an ebill has been generated etc. a pre approved template message can be sent out.</p>
<p>Templates are also known as HSMs. HSM stands for Highly Structured Message. A HSM template will have placeholders in it which can be filled with dynamic user specific values. Here’s a sample HSM:</p>
<blockquote>
<p>Hi {{1}}! Thanks for starting your personal training plan. We’ll send you    a {{2}} update with your new schedule. You can log-in online using your      training ID {{3}}. Stay fit!</p>
</blockquote>
<p>After filling in user specific data the HSM will be sent out as:</p>
<blockquote>
<p>Hi Joey! Thanks for starting your personal training plan. We’ll send you a   weekly update with your new schedule. You can log-in online using your       training ID 123456. Stay fit!</p>
</blockquote>
<p>Media support for HSMs is currently does not exist but will be opened soon. However,dynamic user specific links can be added in the HSM.</p>
<h2><a class="anchor" aria-hidden="true" id="user-initiated-conversations"></a><a href="#user-initiated-conversations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User initiated Conversations</h2>
<p><img src="/assets/user-message.png" alt="User Initiated Conversations"></p>
<p>Here's how a user initiated conversation works:</p>
<ol>
<li>User sends message to Business Whatsapp Number</li>
<li>The message is received as an incoming message notification on the Whatsapp Instance.</li>
<li>The Whatsapp instance sends the message to Mogambo.</li>
<li>Mogambo processes the message and sends the reply to the Whatsapp Instance.</li>
<li>The Whatsapp instance sends the reply to the user.</li>
</ol>
<p>The Incoming message notification sends the message and the wa_id(whatsapp id) to the callback. The wa_id is enough to identify the user and send the response back to them.</p>
<h2><a class="anchor" aria-hidden="true" id="bot-initiated-conversations---message-templates"></a><a href="#bot-initiated-conversations---message-templates" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bot Initiated Conversations - Message Templates</h2>
<p>Transactional templates are bot Initiated messages. Example: Sending E-Ticket after completing booking on website. Whatsapp charges for every transactional template sent. The templates have to be transactional and can’t be promotional in nature. There are 3 major steps involved in this process:</p>
<p><strong>Template Approval</strong>
The first step is to create a message template according to whatsapp guidelines and request for approval. The approval process can take 2-3 weeks.</p>
<p><strong>User Opt-In</strong>
The second step is to get an opt-in from user for sending messages to them on whatsapp.</p>
<p><img src="/assets/sending-notifications.png" alt="Bot Initiated Conversations"></p>
<p><strong>Sending the template</strong>
Finally when the business wants to send a template message they make an API request to Mogambo with the whatsapp number, the template id and the data to be filled in the template. Mogambo then fetches the whatsapp id for the number and if that is found it sends a request to the whatsapp server instance with the template id, whatsapp id and the data for the template.</p>
<p>The whatsapp server instance then sends the message template to the user.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 8/20/2020</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/whatsapp/technical-setup"><span class="arrow-prev">← </span><span>Technical Setup</span></a><a class="docs-next button" href="/whatsapp/bot-deploy-whatsapp"><span class="function-name-prevnext">Deploy Bot to WhatsApp</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#user-initiated-conversations">User initiated Conversations</a></li><li><a href="#bot-initiated-conversations---message-templates">Bot Initiated Conversations - Message Templates</a></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="footer"><a href="https://haptik.ai/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/image_0.png" alt="Haptik Inc." width="100"/></a><div class="footer-columns"><div class="footer-column"><div class="footer-column-title">Tools</div><div class="footer-column-links"><a href="https://docs.haptik.ai/bot-builder/basic/introduction" class="footer-column-link">Bot Builder</a><a href="https://docs.haptik.ai/agent-chat/" class="footer-column-link">Agent Chat</a><a href="https://docs.haptik.ai/bot-analytics/" class="footer-column-link">Analytics</a></div></div><div class="footer-column"><div class="footer-column-title">Integrations</div><div class="footer-column-links"><a href="https://docs.haptik.ai/ios-sdk/" class="footer-column-link">iOS SDK</a><a href="https://docs.haptik.ai/android-sdk/" class="footer-column-link">Android SDK</a><a href="https://docs.haptik.ai/web-sdk/" class="footer-column-link">Web SDK</a><a href="https://docs.haptik.ai/whatsapp/" class="footer-column-link">WhatsApp</a><a href="https://docs.haptik.ai/other/facebook" class="footer-column-link">Facebook</a><a href="https://docs.haptik.ai/webhooks/" class="footer-column-link">Bot API</a></div></div><div class="footer-column"><div class="footer-column-title">Others</div><div class="footer-column-links"><a href="https://docs.haptik.ai/hsl/" class="footer-column-link">HSL</a><a href="https://docs.haptik.ai/other/security" class="footer-column-link">Security</a><a href="https://docs.haptik.ai/other/sla" class="footer-column-link">SLA</a><a href="https://docs.haptik.ai/external-chat-tool/" class="footer-column-link">External Agent Chat Tool</a></div></div></div><div class="footer-copyright"></div></div><section class="copyright">Copyright © 2020 Haptik Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '224c7079e67e84a978d8b4621f6af16d',
                indexName: 'haptik',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>