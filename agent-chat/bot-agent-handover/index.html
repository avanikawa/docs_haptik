<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Bot Agent Handover · Haptik Docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="A user always talks to a Business. The user can use one of the many device platforms (Haptik SDKs, Messenger, Jio, etc.) to communicate with the Business."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Bot Agent Handover · Haptik Docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.haptik.ai/"/><meta property="og:description" content="A user always talks to a Business. The user can use one of the many device platforms (Haptik SDKs, Messenger, Jio, etc.) to communicate with the Business."/><meta property="og:image" content="https://docs.haptik.ai/img/image_0.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.haptik.ai/img/image_0.png"/><link rel="shortcut icon" href="/img/image_0.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-106563119-6', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="/js/index.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/image_0.png" alt="Haptik Docs"/><h2 class="headerTitleWithLogo">Haptik Docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/#tools" target="_self">Tools</a></li><li class=""><a href="/#integrations" target="_self">Integrations</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Resources</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/agent-chat/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/for-team-leads">For Team Lead</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/for-chat-agents">For Chat Agents</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul class=""><li class="navListItem"><a class="navItem" href="/agent-chat/navigating-interface-shortcuts">Shortcuts for navigation</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/claiming-and-closing">Claiming &amp; Closing Chats</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/adding-agents-and-permissions">Adding Agents &amp; Permissions</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/adding-custom-tools">Adding your own custom tool</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/integrating-external-bot">Integrating with External Bot</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Resources</h3><ul class=""><li class="navListItem"><a class="navItem" href="/agent-chat/businesses">Businesses</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/teams">Teams</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/analytics">Analytics</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/agent-reports">Agent Reports</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/chat-assignment">Chat assignment</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/agent-chat/bot-agent-handover">Bot Agent Handover</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/action-toolbars">Toolbar Actions</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/smart-actions">Smart Actions</a></li><li class="navListItem"><a class="navItem" href="/agent-chat/closing-categories">Closing Categories</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Bot Agent Handover</h1></header><article><div><span><p>A user always talks to a Business. The user can use one of the many device platforms (Haptik SDKs, Messenger, Jio, etc.) to communicate with the Business.</p>
<pre><code class="hljs">On the Business side, any replies could be sent automatically by a
1. Bot (Gogo) or
2. by an Expert/Agent from Athena.
</code></pre>
<p>To keep the transition from Bot to Agent smooth for best user experience, we allow multiple different ways a chat can be transferred from a Bot to a Human.</p>
<h2><a class="anchor" aria-hidden="true" id="handover-rules"></a><a href="#handover-rules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handover rules</h2>
<h3><a class="anchor" aria-hidden="true" id="adding-agent-chat-integration-functionality-on-bot"></a><a href="#adding-agent-chat-integration-functionality-on-bot" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding Agent Chat Integration functionality on Bot:</h3>
<p>There is a generic function for Agent Chat integration which needs to be added on a node from where the agent function is to be used.</p>
<p><strong>integration.utils.common.chat_force_pending</strong></p>
<p>On the <strong>Integrations</strong> tab of the node, select the type as <strong>Entity and Integration function</strong> and add the below function name in the integration field and then click on Save.</p>
<p><img src="/assets/HO1.png" alt="Chat Integration Function"></p>
<p>If this integration function exists, then the chat will be transferred to a team as per the integration function. This is how we achieve <strong>Skill-based routing</strong>.</p>
<h3><a class="anchor" aria-hidden="true" id="human-assistance-flag-on-business-manager"></a><a href="#human-assistance-flag-on-business-manager" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Human Assistance flag on Business Manager:</h3>
<p>If the human assistance flag is on for a business, a chat will be moved to an agent whenever the bot doesn't understand the user's message.</p>
<p>For a bot that already allows human assistance, set the <em>Handover Message Flag</em> field to <em>True</em> for your target business. This will send the bot break message first before moving the chat to a pending state. And eventually this chat gets assigned to an agent.</p>
<pre><code class="hljs">Tip: In these automated methods, you cannot assign directly to an agent. We send it to a team first.
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="claiming-a-chat-from-agent-chat-tool"></a><a href="#claiming-a-chat-from-agent-chat-tool" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Claiming a chat from Agent Chat tool:</h3>
<p>You can send a chat to any specific agent using the <em>Reassign Chat</em> button from Agent Chat tool.</p>
<p>For automated transitions, Business Manager in Bot Builder has a <code>Team Manager</code> section where you can configure the Team that the chat should be moved to.</p>
<pre><code class="hljs">Tip: API Integration functions can also specify the team to which a chat is to be sent.
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="settings-to-configure-the-bot-with-agent-chat-tool"></a><a href="#settings-to-configure-the-bot-with-agent-chat-tool" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Settings to configure the bot with Agent Chat tool:</h3>
<ol>
<li>Go to the Teams page on Agent Chat tool and click on Create Teams</li>
</ol>
<p><img src="/assets/HO2.png" alt="Team Creation1"></p>
<ol start="2">
<li>After creating the team, add a name for your team, add the owner in the respective fields and tap on the Create Button to create the Team.</li>
</ol>
<p><img src="/assets/HO3.png" alt="Team Creation2"></p>
<p>Team Description is optional.</p>
<ol start="3">
<li>Now, assign agents for the Team created. For this -</li>
</ol>
<ul>
<li>Open the team which you just created by selecting it from LHS.</li>
<li>Tap on Manage Agents Tab on the top menu bar.</li>
<li>Tap on Add agent Button.</li>
<li>You can add agents by looking for a username in the field.</li>
</ul>
<p>Adding agents on a team -</p>
<p><img src="/assets/HO4.png" alt="Team Creation3"></p>
<p>Searching for an agent to be added in the team</p>
<p><img src="/assets/HO5.png" alt="Team Creation4"></p>
<ol start="4">
<li><p>After the agent's name has been added, you can customize the messages that will be sent to users when agents are busy or are not online. For this, we need to understand the difference between the delay message, message sent when no agent is online and message sent when users are not replying. You can read more about it <a href="https://docs.haptik.ai/agent-chat/teams#how-to-create-a-team">here</a>.</p></li>
<li><p>Configure Teams on Business Manager - Once a team is created, it should be added to the Business Manager on the General Settings page, as follows.</p></li>
</ol>
<ul>
<li>A list of created teams appears in the Default Team. Select the one which was created.</li>
<li>Once the Team is added to Default Team, Click on Save.</li>
</ul>
<p><img src="/assets/HO6.png" alt="Team Creation5"></p>
<h2><a class="anchor" aria-hidden="true" id="queue-position-indicator"></a><a href="#queue-position-indicator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Queue Position Indicator</h2>
<p>This helps us to set correct expectation and smoothen the transition from bot to agent for end users. We engage the end users in queue by sending a message with their position in the queue. With this we inform our end users on Whatsapp, Facebook, Web or any other platform about how many people are currently ahead of them in the queue and thus they can decide if they want to abandon chat or stay.</p>
<p>We send the below messages before an agent could respond back to the user when they are waiting in the queue. When the user is first in the pending queue, we send the 1st message indicating that the user is next. Post that, for the position in queue ranging from 2-5 we send the 2nd message and replace the <X> with the number of users ahead of them in the queue. Post the position of 5, we send out the 3rd message.</p>
<ol>
<li>You are next! We'll be reviewing your query right away.</li>
<li>We're assigning someone to you. You will receive a reply as soon as we close <X> conversations</li>
<li>You are in line. I'll send you a message as soon as we review your query. Just don't close this window.</li>
</ol>
<p>This message is only sent if the chat is in the <strong>Queue state</strong>. We need to draft the Bot Break message or Agent Transfer message in a way that, post which when the user is still in queue, they will get this <strong>Queue Time Indicator</strong> message. Also, a <strong>Delay message</strong> is sent as configured in Team settings.</p>
<p>In most scenarios, delay messages are sent after 60 seconds or the time you have configued in the Team Settings screen, so this is generally the order in which the user gets messages -</p>
<ol>
<li><p>Bot Break or Agent Transfer message
(Example - Sorry, the bot cannot handle this. This conversation will be transferred to an agent)</p></li>
<li><p>Queue Time Indicator message (as shared in the points above)</p></li>
<li><p>Delay mmssage (Sorry, our agents are busy. Please try again after some time)</p></li>
</ol>
<p>If the user still stays, user sees the agent entering the chat.</p>
<hr>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 8/20/2020</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/agent-chat/chat-assignment"><span class="arrow-prev">← </span><span>Chat assignment</span></a><a class="docs-next button" href="/agent-chat/action-toolbars"><span>Toolbar Actions</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#handover-rules">Handover rules</a><ul class="toc-headings"><li><a href="#adding-agent-chat-integration-functionality-on-bot">Adding Agent Chat Integration functionality on Bot:</a></li><li><a href="#human-assistance-flag-on-business-manager">Human Assistance flag on Business Manager:</a></li><li><a href="#claiming-a-chat-from-agent-chat-tool">Claiming a chat from Agent Chat tool:</a></li><li><a href="#settings-to-configure-the-bot-with-agent-chat-tool">Settings to configure the bot with Agent Chat tool:</a></li></ul></li><li><a href="#queue-position-indicator">Queue Position Indicator</a></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="footer"><a href="https://haptik.ai/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/image_0.png" alt="Haptik Inc." width="100"/></a><div class="footer-columns"><div class="footer-column"><div class="footer-column-title">Tools</div><div class="footer-column-links"><a href="https://docs.haptik.ai/bot-builder/basic/introduction" class="footer-column-link">Bot Builder</a><a href="https://docs.haptik.ai/agent-chat/" class="footer-column-link">Agent Chat</a><a href="https://docs.haptik.ai/bot-analytics/" class="footer-column-link">Analytics</a></div></div><div class="footer-column"><div class="footer-column-title">Integrations</div><div class="footer-column-links"><a href="https://docs.haptik.ai/ios-sdk/" class="footer-column-link">iOS SDK</a><a href="https://docs.haptik.ai/android-sdk/" class="footer-column-link">Android SDK</a><a href="https://docs.haptik.ai/web-sdk/" class="footer-column-link">Web SDK</a><a href="https://docs.haptik.ai/whatsapp/" class="footer-column-link">WhatsApp</a><a href="https://docs.haptik.ai/other/facebook" class="footer-column-link">Facebook</a><a href="https://docs.haptik.ai/webhooks/" class="footer-column-link">Bot API</a></div></div><div class="footer-column"><div class="footer-column-title">Others</div><div class="footer-column-links"><a href="https://docs.haptik.ai/hsl/" class="footer-column-link">HSL</a><a href="https://docs.haptik.ai/other/security" class="footer-column-link">Security</a><a href="https://docs.haptik.ai/other/sla" class="footer-column-link">SLA</a><a href="https://docs.haptik.ai/external-chat-tool/" class="footer-column-link">External Agent Chat Tool</a></div></div></div><div class="footer-copyright"></div></div><section class="copyright">Copyright © 2020 Haptik Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '224c7079e67e84a978d8b4621f6af16d',
                indexName: 'haptik',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>